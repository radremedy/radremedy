!function(e,t){"use strict";e.Remedy=e.Remedy||{},e.Remedy.hideFormGroup=function(e){t(function(){var n=t("#"+e).parentsUntil("div.form-group").parent();n.hasClass("form-group")&&n.hide()})},e.Remedy.makeBootstrapMultiselect=function(e){t(function(){var n=t("#"+e),a="option",o="options";n.data("noun")&&(a=n.data("noun")),n.data("nounplural")&&(o=n.data("nounplural"));var l="Search "+o;n.multiselect({buttonWidth:"100%",maxHeight:300,enableClickableOptGroups:!0,includeSelectAllOption:!1,enableFiltering:!0,enableCaseInsensitiveFiltering:!0,filterPlaceholder:l,templates:{filter:'<li class="multiselect-item filter"><div class="input-group"><input class="form-control multiselect-search" type="text" aria-label="'+l+'"></div></li>',filterClearBtn:'<span class="input-group-btn"><button class="btn btn-default multiselect-clear-filter" type="button" title="Clear filter"><span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span><span class="sr-only">Clear filter</span></button></span>'},buttonText:function(e,n){if(0===e.length)return t(n).prop("multiple")?"No "+o+" selected":"No "+a+" selected";if(e.length>3)return e.length.toString()+" "+o+" selected";var l=[];return e.each(function(){t(this).attr("label")?l.push(t(this).attr("label")):l.push(t(this).html())}),l.join(", ")+""}})})};var n=function(e,t,n){n?(e.val(n.latitude.toFixed(5)),t.val(n.longitude.toFixed(5))):(e.val(""),t.val(""))},a=function(e,t,n){e.data("lastval",e.val());var a=e.parents(".form-group").first();if(0!==a.length){a.addClass("has-feedback");var o=a.find(".form-control-feedback"),l=a.find(".js-feedback-label");if(0!==o.length&&0!==l.length){var i=a.find(".input-group-btn");i.length>0&&o.css("right",i.width()),""!=e.val()?""!=t.val()&&""!=n.val()?(a.addClass("has-success").removeClass("has-warning"),l.text("A valid location was selected."),o.addClass("glyphicon-ok").attr("title","A valid location was selected.").removeClass("glyphicon-warning-sign glyphicon-option-horizontal invisible")):(a.addClass("has-warning").removeClass("has-success"),l.text("Please select a location."),o.addClass("glyphicon-warning-sign").attr("title","Please select a location.").removeClass("glyphicon-ok glyphicon-option-horizontal invisible")):(a.removeClass("has-success has-warning"),l.html(""),o.addClass("glyphicon-option-horizontal invisible").removeClass("glyphicon-ok glyphicon-warning-sign"))}}},o=function(e,t){e.prop("disabled",t),e.children(".glyphicon").toggleClass("glyphicon-screenshot glyphicon-hourglass")};e.Remedy.geoLocationButton=function(l,i,r,s){t(function(){var c=t("#"+l),d=t("#"+i),g=t("#"+r),u=t("#"+s);c.length&&d.length&&g.length&&u.length&&("geolocation"in navigator==!1&&(c.prop("disabled",!0),c.attr("title","Your browser does not support geolocation.")),c.prop("disabled",!1),c.on("click.remedy.geolocation",function(){o(c,!0),navigator.geolocation.getCurrentPosition(function(e){o(c,!1),d.val("My Current Location"),n(g,u,e.coords),a(d,g,u)},function(t){o(c,!1),a(d,g,u),1!==t.code&&e.alert("Sorry, we couldn't determine your position.")},{enableHighAccuracy:!1,timeout:2e4,maximumAge:0})}))})};var l=function(e){var t=Math.max(320,Math.min(e.parent().width(),800));e.width(t),e.height(t)};e.Remedy.showProviderMap=function(e,n){return n.length?(t(function(){var a=t("#"+e);l(a);var o,i,r,s=new google.maps.Map(document.getElementById(e)),c=new google.maps.LatLngBounds;for(r=0;r<n.length;r+=1){var d=n[r];o=new google.maps.Marker({map:s,title:d.name,position:new google.maps.LatLng(d.latitude,d.longitude)});var g=t("<div />");t("<a href='"+d.url+"' target='_blank'><strong>"+d.name+"</strong></a><br />").appendTo(g),t("<addr><small>"+d.address+"</small></addr><br />").appendTo(g),t("<span />").html(d.desc).appendTo(g),i=new google.maps.InfoWindow({content:g.html(),maxWidth:320}),google.maps.event.addListener(o,"click",function(e,t){return function(){t.open(s,e)}}(o,i)),c.extend(o.position)}s.fitBounds(c),google.maps.event.addDomListener(window,"resize",function(){l(a);var e=s.getCenter();google.maps.event.trigger(s,"resize"),s.setCenter(e)})}),!0):(t(function(){t("#"+e).parent().hide()}),!1)};var i=function(e){if(!e||!e.length)return"";for(var n=0;n<e.length;n+=1){var a=e[n];if(t.inArray(a,["locality","administrative_area_level_2","administrative_area_level_1"])>=0)return a}return""},r=function(e){var n="",a="",o="";if(!e||!e.address_components||!e.address_components.length)return"";for(var l=0;l<e.address_components.length;l+=1){var r=e.address_components[l],s="";if(!(s=t.trim(r.short_name)||t.trim(r.long_name)))return"";switch(i(r.types)){case"locality":s=t.trim(r.long_name)||s,n=n||s;break;case"administrative_area_level_2":a=a||s;break;case"administrative_area_level_1":o=o||s}}var c=n||a||"";return o&&(c&&(c+=", "),c+=o),c};e.Remedy.initMapsAutocomplete=function(e,o,l,i,s){var c=t("#"+o),d=t("#"+l),g=t("#"+i),u=t(),p=[];s&&(u=t("#"+s)),p=e?["address"]:["(cities)"],t(function(){var e=new google.maps.places.Autocomplete(c.get()[0],{types:p});google.maps.event.addListener(e,"place_changed",function(){var t=e.getPlace();t&&t.geometry&&t.geometry.location?(n(d,g,{latitude:t.geometry.location.lat(),longitude:t.geometry.location.lng()}),u.length>0&&u.val(r(t)),a(c,d,g)):(n(d,g,null),u.val(""),a(c,d,g))}),c.on("keyup input paste change",function(){t(this).val()!=t(this).data("lastval")&&(n(d,g,null),u.val("")),a(c,d,g)}),a(c,d,g)})}}(window,jQuery);